<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/cli/JavaScriptObfuscatorCLI.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">All files</a> / <a href="index.html">src/cli</a> JavaScriptObfuscatorCLI.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">75.81% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>47/62</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">61.9% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>13/21</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">25% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>1/4</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">76.27% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>45/59</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">58x</span>
<span class="cline-any cline-yes">41x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">17x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="missing-if-branch" title="else path not taken" >E</span>"use strict";
const commands = require('commander');
const fs = require('fs');
const mkdirp = require('mkdirp');
const path = require('path');
const child_process_1 = require("child_process");
const DefaultPreset_1 = require("../preset-options/DefaultPreset");
const JavaScriptObfuscator_1 = require("../JavaScriptObfuscator");
class JavaScriptObfuscatorCLI {
    constructor(argv) {
        this.data = '';
        this.rawArguments = argv;
        this.arguments = this.rawArguments.slice(2);
    }
    static buildOptions() {
        let options = {}, availableOptions = Object.keys(DefaultPreset_1.DEFAULT_PRESET);
        for (let option in commands) {
            if (!commands.hasOwnProperty(option)) {
                continue;
            }
            if (availableOptions.indexOf(option) === -1) {
                continue;
            }
            options[option] = commands[option];
        }
        return Object.assign({}, DefaultPreset_1.DEFAULT_PRESET, options);
    }
    static getBuildVersion() {
        return child_process_1.execSync(`npm info ${JavaScriptObfuscatorCLI.packageName} version`, {
            encoding: JavaScriptObfuscatorCLI.encoding
        });
    }
    static isFilePath(filePath) {
        try {
            return fs.statSync(filePath).isFile();
        }
        catch (e) {
<span class="cstat-no" title="statement not covered" >            return false;</span>
        }
    }
    static parseBoolean(value) {
        return value === 'true' || value === '1';
    }
    run() {
        this.configureCommands();
        if (!this.arguments.length || this.arguments.indexOf('--help') &gt;= 0) <span class="missing-if-branch" title="if path not taken" >I</span>{
<span class="cstat-no" title="statement not covered" >            commands.outputHelp();</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
        this.inputPath = this.getInputPath();
        this.getData();
        this.processData();
    }
    configureCommands() {
        commands
            .version(JavaScriptObfuscatorCLI.getBuildVersion(), '-v, --version')
            .usage('&lt;inputPath&gt; [options]')
            .option('-o, --output &lt;path&gt;', 'Output path for obfuscated code')
            .option('--compact &lt;boolean&gt;', 'Disable one line output code compacting', JavaScriptObfuscatorCLI.parseBoolean)
            .option('--debugProtection &lt;boolean&gt;', 'Disable browser Debug panel (can cause DevTools enabled browser freeze)', JavaScriptObfuscatorCLI.parseBoolean)
            .option('--debugProtectionInterval &lt;boolean&gt;', 'Disable browser Debug panel even after page was loaded (can cause DevTools enabled browser freeze)', JavaScriptObfuscatorCLI.parseBoolean)
            .option('--disableConsoleOutput &lt;boolean&gt;', 'Allow console.log, console.info, console.error and console.warn messages output into browser console', JavaScriptObfuscatorCLI.parseBoolean)
            .option('--encodeUnicodeArray &lt;boolean&gt;', 'All literals in Unicode array become encoded in Base64 (this option can slightly slow down your code speed)', JavaScriptObfuscatorCLI.parseBoolean)
            .option('--reservedNames &lt;list&gt;', 'Disable obfuscation of variable names, function names and names of function parameters that match the passed RegExp patterns (comma separated)', <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ></span>(val) =&gt; val.split(','))</span>
            .option('--rotateUnicodeArray &lt;boolean&gt;', 'Disable rotation of unicode array values during obfuscation', JavaScriptObfuscatorCLI.parseBoolean)
            .option('--selfDefending &lt;boolean&gt;', 'Disables self-defending for obfuscated code', JavaScriptObfuscatorCLI.parseBoolean)
            .option('--unicodeArray &lt;boolean&gt;', 'Disables gathering of all literal strings into an array and replacing every literal string with an array call', JavaScriptObfuscatorCLI.parseBoolean)
            .option('--unicodeArrayThreshold &lt;number&gt;', 'The probability that the literal string will be inserted into unicodeArray (Default: 0.8, Min: 0, Max: 1)', parseFloat)
            .option('--wrapUnicodeArrayCalls &lt;boolean&gt;', 'Disables usage of special access function instead of direct array call', JavaScriptObfuscatorCLI.parseBoolean)
            .parse(this.rawArguments);
        commands.on('--help', <span class="fstat-no" title="function not covered" ></span>() =&gt; {
            l</span></span>et isWindows = <span class="cstat-no" title="statement not covered" >process.platform === 'win32', commandName = <span class="cstat-no" title="statement not covered" >isWindows ? 'type' : 'cat';
<span class="cstat-no" title="statement not covered" >            console.log('  Examples:\n');</span>
<span class="cstat-no" title="statement not covered" >            console.log('    %&gt; javascript-obfuscator &lt; in.js &gt; out.js');</span>
<span class="cstat-no" title="statement not covered" >            console.log(`    %&gt; ${commandName} in1.js in2.js | javascript-obfuscator &gt; out.js`);</span>
<span class="cstat-no" title="statement not covered" >            console.log('');</span>
<span class="cstat-no" title="statement not covered" >            process.exit();</span>
        });
    }
    getData() {
        this.data = fs.readFileSync(this.inputPath, JavaScriptObfuscatorCLI.encoding);
    }
    getInputPath() {
        let inputPath = this.arguments[0];
        if (!JavaScriptObfuscatorCLI.isFilePath(inputPath)) <span class="missing-if-branch" title="if path not taken" >I</span>{
<span class="cstat-no" title="statement not covered" >            throw new ReferenceError(`First argument must be a valid file path`);</span>
        }
        if (JavaScriptObfuscatorCLI.availableInputExtensions.indexOf(path.extname(inputPath)) === -1) <span class="missing-if-branch" title="if path not taken" >I</span>{
<span class="cstat-no" title="statement not covered" >            throw new ReferenceError(`Input file must have .js extension`);</span>
        }
        return inputPath;
    }
    getOutputPath() {
        let outputPath = commands.output;
        if (outputPath) {
            return outputPath;
        }
<span class="cstat-no" title="statement not covered" >        return this.inputPath</span>
            .split('.')
            .map(<span class="fstat-no" title="function not covered" ></span>(value, index) =&gt; {
<span class="cstat-no" title="statement not covered" >            return index === 0 ? `${value}-obfuscated` : value;</span>
        })
            .join('.');
    }
    processData() {
        let outputPath = this.getOutputPath(), dirName = path.dirname(outputPath);
        mkdirp.sync(dirName);
        fs.writeFileSync(this.getOutputPath(), JavaScriptObfuscator_1.JavaScriptObfuscator.obfuscate(this.data, JavaScriptObfuscatorCLI.buildOptions()), {
            encoding: JavaScriptObfuscatorCLI.encoding
        });
    }
}
JavaScriptObfuscatorCLI.availableInputExtensions = [
    '.js'
];
JavaScriptObfuscatorCLI.encoding = 'utf8';
JavaScriptObfuscatorCLI.packageName = 'javascript-obfuscator';
exports.JavaScriptObfuscatorCLI = JavaScriptObfuscatorCLI;
//# sourceMappingURL=JavaScriptObfuscatorCLI.js.map</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Jun 27 2016 15:51:57 GMT+0300 (MSK)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
